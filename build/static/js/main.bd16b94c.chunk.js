(this.webpackJsonpassignment=this.webpackJsonpassignment||[]).push([[0],{19:function(e,t,a){},21:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(5),c=a.n(r),o=(a(19),a(4)),l=a(3),i=a(9),u=a.n(i),j=a(12),b=a(11),d=(a(21),a(7)),O=a(13),m=a(2),p=a(6),h=Object(p.b)({name:"auth",initialState:{user_id:null,role:null,basic_info:null,jwt:null,status:!1},reducers:{login:function(e,t){return t.payload},logout:function(e){return{user_id:null,role:null,basic_info:null,jwt:null,status:!1}}}}),f=h.actions,g=f.login,x=f.logout,w=h.reducer,S=a(1),y=function(){var e=Object(m.b)(),t=Object(s.useState)({username:"",password:""}),a=Object(b.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(!1),i=Object(b.a)(c,2),p=i[0],h=i[1],f=function(e){var t=e.target.id,a=e.target.value;r(Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},t,a)))},x=function(){var t=Object(j.a)(u.a.mark((function t(a){var s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("https://myphysio.digitaldarwin.in/api/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:n.username,password:n.password,blocked:0})});case 3:if(200===(s=t.sent).status){t.next=7;break}return alert("Invalid credentials"),t.abrupt("return");case 7:return t.next=9,s.json();case 9:c=t.sent,localStorage.clear(),localStorage.setItem("jwt",c.jwt),localStorage.setItem("jwt_data",JSON.stringify(Object(O.a)(c.jwt))),localStorage.setItem("role",c.role),localStorage.setItem("user_id",c.user_id),localStorage.setItem("basic_info",JSON.stringify(c.basic_info)),r({username:"",password:""}),e(g(Object(l.a)(Object(l.a)({},c),{},{status:!0})));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{className:"title",children:"Physioai"}),Object(S.jsx)("p",{className:"welcome",children:"Welcome Back!"}),Object(S.jsxs)("form",{className:"login-form",onSubmit:x,children:[Object(S.jsx)("label",{className:"required-label",htmlFor:"username",children:"Username"}),Object(S.jsx)("input",{type:"text",id:"username",value:n.username,onChange:f,placeholder:"Enter Username...",title:"Enter Username",required:!0}),Object(S.jsx)("label",{className:"required-label",htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{type:"password",id:"password",value:n.password,onChange:f,placeholder:"Enter Password...",title:"Enter Password",required:!0}),Object(S.jsx)("span",{onClick:function(){var e=document.getElementById("password");e.type=p?"password":"text",h(!p)},className:"eye",children:p?Object(S.jsx)(d.b,{}):Object(S.jsx)(d.a,{})}),Object(S.jsx)("a",{href:"/#",children:"Forgot Password?"}),Object(S.jsx)("button",{type:"submit",children:"Login"})]})]})},v=function(){var e=Object(m.c)((function(e){return e.authReducer})),t=Object(m.b)(),a=e.basic_info,s=a.first_name,n=a.last_name,r=a.mobile_no,c=a.whatsapp_no;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{className:"title",children:"Physioai"}),Object(S.jsxs)("p",{className:"welcome",children:["Welcome ","".concat(s," ").concat(n),"!"]}),Object(S.jsxs)("p",{children:["Your role: ",e.role]}),Object(S.jsxs)("p",{children:["Your Mobile: ",r]}),Object(S.jsxs)("p",{children:["Your Whatsapp: ",c]}),Object(S.jsx)("button",{onClick:function(){localStorage.clear(),t(x())},style:{marginTop:"30px"},children:"Logout"})]})})},_=function(){var e=Object(m.c)((function(e){return e.authReducer})),t=Object(m.b)();return Object(s.useEffect)((function(){var e;localStorage.getItem("jwt")&&t(g(Object(l.a)(Object(l.a)({},localStorage),{},(e={},Object(o.a)(e,"basic_info",JSON.parse(localStorage.getItem("basic_info"))),Object(o.a)(e,"status",!0),e))))}),[e.status]),Object(S.jsx)(S.Fragment,{children:e.status?Object(S.jsx)(v,{}):Object(S.jsx)(y,{})})},N=Object(p.a)({reducer:{authReducer:w}});c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(m.a,{store:N,children:Object(S.jsx)(_,{})})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.bd16b94c.chunk.js.map